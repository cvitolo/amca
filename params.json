{"name":"R amca","tagline":"Automatic Model Configuration Algorithm (AMCA)","body":"AMCA (R-package)\r\n================\r\n\r\nAutomatic Model Configuration Algorithm (AMCA)\r\n\r\nThis is a data mining procedure based on unsupervised machine learning\r\ntechniques to automatically configure hydrological conceptual rainfall-runoff models such as FUSE.\r\n\r\n#### Basics\r\nInstall and load packages\r\n```R\r\n# Install dependent packages from CRAN:\r\nx <- c(\"qualV\", \"ggplot2\", \"emoa\", \"som\", \"dtw\", \"tgp\", \"devtools\",\r\n       \"reshape2\", \"colorspace\", \"RColorBrewer\")\r\ninstall.packages(x)\r\nlapply(x, require, character.only=T); rm(x)\r\n\r\n# Install dpendent package from R-Forge:\r\n# install.packages(\"fuse\", repos=\"http://R-Forge.R-project.org\")\r\nlibrary(fuse)\r\n\r\n# Install dependent gists and packages from github:\r\nlibrary(devtools)\r\ninstall_github(\"r_pure\", username = \"cvitolo\", subdir = \"pure\")\r\nlibrary(pure)\r\ninstall_github(\"r_amca\", username = \"cvitolo\", subdir = \"amca\")\r\nlibrary(amca)\r\n```\r\n\r\n### Rainfall-Runoff modelling using FUSE\r\nAs an example, we could combine 50 parameter sets and 4 model structures to generate 200 model simulations.\r\n\r\nSample 50 parameter sets for FUSE, using LHS method\r\n```R\r\nlibrary(fuse)\r\ndata(DATA)\r\n\r\nset.seed(123)\r\nNumberOfRuns <- 10    \r\nparameters <- GeneratePsetsFUSE(NumberOfRuns)\r\n```\r\n\r\nChoose a list of models to take into account\r\n```R\r\nselectedModels <- c(60,230,342,426) \r\n```\r\n\r\nDefine the list of Model Performance Indices (MPIs)\r\n```R\r\nlibrary(tiger)\r\nlibrary(qualV)\r\nLAGTIME = function(x) lagtime(x$Qo,x$Qs)    \r\nMAE     = function(x) mean(x$Qs - x$Qo, na.rm = TRUE)            \r\nNSHF    = function(x) 1 - EF(x$Qo,x$Qs)           \r\nNSLF    = function(x) 1 - EF( log(x$Qo) , log(x$Qs) )           \r\nRR      = function(x) sum(x$Qs) /sum(x$Po)\r\n\r\nMPIs <- list(\"LAGTIME\"=LAGTIME,\"MAE\"=MAE,\"NSHF\"=NSHF,\"NSLF\"=NSLF,\"RR\"=RR)\r\n```\r\n\r\nRun simulations\r\n```R\r\nlibrary(pure)\r\noutputFolder <- \"~\"\r\ndeltim <- 1/24 # or multiplier/60/60/24\r\nwarmup <- round(dim(DATA)[1]/10,0)\r\n\r\n# It is recommended to run simulations on HPC facilities. \r\n# However small batches can be run locally using the function MCsimulations()\r\nMCsimulations(DATA,deltim,warmup,parameters,ModelList,outputFolder,MPIs)\r\n```\r\n\r\n### Find the best configuration(s) amongst those simulated\r\nRun the AMCA algorithm:\r\n```R\r\nlibrary(amca)\r\nresults <- amca(DATA, parameters, MPIs, outputFolder, selectedModels, warmup)\r\n```\r\n\r\nThe best configuration is stored in\r\n```R\r\nresults$RETable\r\n\r\nPlotEnsembles(results$BoundsRE$bounds, results$BoundsRE$discharges,\r\n              label1=\"min-max\", label2=\"percentiles\")\r\n```\r\n","google":"UA-44379190-5","note":"Don't delete this file! It's used internally to help with page regeneration."}